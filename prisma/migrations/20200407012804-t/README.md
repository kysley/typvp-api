# Migration `20200407012804-t`

This migration has been generated by Evan Kysley at 4/7/2020, 1:28:04 AM.
You can check out the [state of the schema](./schema.prisma) after the migration.

## Database Steps

```sql
CREATE TYPE "ResultType" AS ENUM ('SINGLEPLAYER', 'RACE', 'TRIAL');

CREATE TYPE "Difficulty" AS ENUM ('EASY', 'NORMAL', 'MEDIUM', 'HARD');

CREATE TYPE "Role" AS ENUM ('USER', 'ADMIN', 'PRO', 'BETA');

ALTER TABLE "default$default"."Account" ALTER COLUMN "confirmed" SET DEFAULT false,
DROP COLUMN "role",
ADD COLUMN "role" "Role" NOT NULL DEFAULT 'USER';

ALTER TABLE "default$default"."Test" DROP COLUMN "type",
ADD COLUMN "type" "ResultType" NOT NULL ;

ALTER TABLE "default$default"."Trial" ALTER COLUMN "custom" SET DEFAULT false,
DROP COLUMN "difficulty",
ADD COLUMN "difficulty" "Difficulty"  ,
ALTER COLUMN "private" SET DEFAULT false;

ALTER INDEX "default$default"."default$default.Account.email._UNIQUE" RENAME TO "Account.email"

ALTER INDEX "default$default"."default$default.Account.username._UNIQUE" RENAME TO "Account.username"

ALTER INDEX "default$default"."default$default.Account.usernameLowercase._UNIQUE" RENAME TO "Account.usernameLowercase"

ALTER INDEX "default$default"."_TrailResults_B" RENAME TO "_TrailResults_B_index"
```

## Changes

```diff
diff --git schema.prisma schema.prisma
migration ..20200407012804-t
--- datamodel.dml
+++ datamodel.dml
@@ -1,0 +1,84 @@
+generator client {
+  provider = "prisma-client-js"
+}
+
+datasource db {
+  provider = "postgresql"
+  url      = env("DATABASE_URL")
+}
+
+generator typegraphql {
+  provider = "node_modules/typegraphql-prisma/generator.js"
+  output = "../prisma/generated/type-graphql"
+}
+
+model Account {
+  color             String?
+  confirmed         Boolean  @default(false)
+  createdAt         DateTime @default(now())
+  email             String   @unique
+  id                String   @id @default(cuid())
+  lastPlayed        String?
+  lastSeen          Float?   @default(now())
+  password          String
+  role              Role     @default(USER)
+  updatedAt         DateTime @default(now())
+  username          String   @unique
+  usernameLowercase String?  @unique
+  Test              Test[]
+  Trial             Trial[]
+}
+
+model Test {
+  account     String?
+  correct     Int
+  corrections Int
+  cpm         Int
+  createdAt   DateTime @default(now())
+  id          String   @id @default(cuid())
+  incorrect   Int
+  rawCpm      Int
+  type        ResultType
+  updatedAt   DateTime
+  wordIndex   Int
+  wpm         Int
+  Account     Account? @relation(fields: [account], references: [id])
+  Trial       Trial[]  @relation("TrailResults", references: [id])
+}
+
+model Trial {
+  createdAt     DateTime @default(now())
+  custom        Boolean? @default(false)
+  difficulty    Difficulty?
+  id            String   @id @default(cuid())
+  maxWordLength Int?
+  minWordLength Int?
+  name          String
+  owner         String?
+  private       Boolean? @default(false)
+  updatedAt     DateTime
+  wordSet       String
+  Account       Account? @relation(fields: [owner], references: [id])
+  Test          Test[]   @relation("TrailResults", references: [id])
+}
+
+enum ResultType {
+  SINGLEPLAYER
+  RACE
+  TRIAL
+}
+
+enum Difficulty {
+  EASY
+  NORMAL
+  MEDIUM
+  HARD
+}
+
+enum Role {
+  USER
+  ADMIN
+  PRO
+  BETA
+}
+
```


